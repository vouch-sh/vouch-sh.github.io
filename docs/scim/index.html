<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Automate User Provisioning with SCIM â€” Vouch â€” Hardware-Backed Developer Credentials</title>
<meta name=description content="Sync users and groups from your identity provider to Vouch automatically using SCIM 2.0."><link rel=canonical href=https://vouch.sh/docs/scim/><meta property="og:title" content="Automate User Provisioning with SCIM â€” Vouch â€” Hardware-Backed Developer Credentials"><meta property="og:description" content="Sync users and groups from your identity provider to Vouch automatically using SCIM 2.0."><meta property="og:url" content="https://vouch.sh/docs/scim/"><meta property="og:site_name" content="Vouch"><meta property="og:type" content="article"><meta property="og:image" content="https://vouch.sh/img/og-image.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Automate User Provisioning with SCIM â€” Vouch â€” Hardware-Backed Developer Credentials"><meta name=twitter:description content="Sync users and groups from your identity provider to Vouch automatically using SCIM 2.0."><meta name=twitter:image content="https://vouch.sh/img/og-image.png"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"><link rel=icon href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”‘</text></svg>"><link rel=author href=/humans.txt><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","description":"Open-source credential broker that issues short-lived SSH, AWS, GitHub, and Kubernetes credentials after FIDO2 hardware verification. One YubiKey tap, 8 hours of access.","name":"Vouch","url":"https://vouch.sh/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","logo":"https://vouch.sh/img/og-image.png","name":"Smoke Turner, LLC","sameAs":["https://github.com/vouch-sh/vouch"],"url":"https://smoketurner.com"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"TechArticle","author":{"@type":"Organization","name":"Smoke Turner, LLC"},"description":"Sync users and groups from your identity provider to Vouch automatically using SCIM 2.0.","headline":"Automate User Provisioning with SCIM","mainEntityOfPage":{"@id":"https://vouch.sh/docs/scim/","@type":"WebPage"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://vouch.sh/img/og-image.png"},"name":"Smoke Turner, LLC"}}</script><link rel=stylesheet href=https://vouch.sh/css/main.min.696319dec26a9f9526ac8dae8c8e12c4271af4250b998632e1aca67447bb363d.css></head><body><header class=nav><div class=nav-inner><a href=/ class=nav-logo><svg viewBox="0 0 32 32" fill="none"><rect x="9" y="14" width="14" height="12" rx="2" stroke="currentcolor" stroke-width="2"/><path d="M12 14V10a4 4 0 118 0v4" stroke="currentcolor" stroke-width="2" stroke-linecap="round"/><circle cx="16" cy="20" r="1.5" fill="currentcolor"/><line x1="16" y1="21.5" x2="16" y2="23.5" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/></svg>
vouch
</a><button class=nav-toggle aria-label="Toggle navigation" onclick='document.querySelector(".nav-links").classList.toggle("open")'><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><ul class=nav-links><li><a href=/docs/>Docs</a></li><li><a href=/blog/>Blog</a></li><li><a href=/about/>About</a></li><li><a href=https://github.com/vouch-sh/vouch target=_blank rel=noopener>GitHub<svg class="github-icon" viewBox="0 0 24 24" fill="currentcolor"><path d="M12 0C5.37.0.0 5.37.0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57.0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925.0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18.0.0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225.0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22.0 1.605-.015 2.895-.015 3.3.0.315.225.69.825.57A12.02 12.02.0 0024 12c0-6.63-5.37-12-12-12z"/></svg></a></li></ul></div></header><main class=content-wrapper><div class=docs-layout><aside class=docs-sidebar id=docs-sidebar><div class=docs-sidebar-title>Documentation</div><nav><ul><li><a href=https://vouch.sh/docs/getting-started/>Getting Started</a></li><li><a href=https://vouch.sh/docs/startups/>Startups</a></li><li class=sidebar-section-group><span class=sidebar-section-label>Infrastructure</span><ul><li><a href=https://vouch.sh/docs/aws/>AWS</a></li><li><a href=https://vouch.sh/docs/aws-multi-account/>AWS Multi-Account</a></li><li><a href=https://vouch.sh/docs/ssh/>SSH Certificates</a></li><li><a href=https://vouch.sh/docs/eks/>Amazon EKS</a></li><li><a href=https://vouch.sh/docs/ssm/>AWS Systems Manager</a></li><li><a href=https://vouch.sh/docs/databases/>Databases</a></li><li><a href=https://vouch.sh/docs/bedrock/>Amazon Bedrock</a></li></ul></li><li class=sidebar-section-group><span class=sidebar-section-label>Code & Packages</span><ul><li><a href=https://vouch.sh/docs/github/>GitHub</a></li><li><a href=https://vouch.sh/docs/docker/>Docker Registries</a></li><li><a href=https://vouch.sh/docs/codeartifact/>AWS CodeArtifact</a></li><li><a href=https://vouch.sh/docs/codecommit/>AWS CodeCommit</a></li><li><a href=https://vouch.sh/docs/cargo/>Cargo</a></li></ul></li><li class=sidebar-section-group><span class=sidebar-section-label>Platform</span><ul><li class=sidebar-group><div class=sidebar-group-header><a href=https://vouch.sh/docs/applications/>Applications (OIDC)
</a><button class=sidebar-chevron onclick='this.closest(".sidebar-group").classList.toggle("open")' aria-label="Toggle section"><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"/></svg></button></div><ul class=sidebar-children><li><a href=https://vouch.sh/docs/applications/rails/>Rails (OmniAuth)</a></li><li><a href=https://vouch.sh/docs/applications/django/>Django (django-allauth)</a></li><li><a href=https://vouch.sh/docs/applications/express/>Express.js (Passport)</a></li><li><a href=https://vouch.sh/docs/applications/nextjs/>Next.js (NextAuth.js)</a></li><li><a href=https://vouch.sh/docs/applications/laravel/>Laravel (Socialite)</a></li><li><a href=https://vouch.sh/docs/applications/flask/>Flask (Authlib)</a></li><li><a href=https://vouch.sh/docs/applications/fastapi/>FastAPI (Authlib)</a></li><li><a href=https://vouch.sh/docs/applications/spring-boot/>Spring Boot (Spring Security)</a></li><li><a href=https://vouch.sh/docs/applications/axum/>Axum (openidconnect-rs)</a></li><li><a href=https://vouch.sh/docs/applications/react/>React (react-oidc-context)</a></li><li><a href=https://vouch.sh/docs/applications/vue/>Vue (oidc-client-ts)</a></li><li><a href=https://vouch.sh/docs/applications/vanilla-js/>Vanilla JavaScript</a></li><li><a href=https://vouch.sh/docs/applications/device-authorization/>Device Authorization (CLI)</a></li></ul></li><li><a href=https://vouch.sh/docs/scim/ class=active>SCIM Provisioning</a></li><li><a href=https://vouch.sh/docs/iac/>Infrastructure as Code</a></li><li><a href=https://vouch.sh/docs/cicd/>CI/CD</a></li><li><a href=https://vouch.sh/docs/cli-reference/>CLI Reference</a></li><li><a href=https://vouch.sh/docs/security/>Security</a></li><li><a href=https://vouch.sh/docs/threat-model/>Threat Model</a></li><li><a href=https://vouch.sh/docs/architecture/>Architecture</a></li><li><a href=https://vouch.sh/docs/availability/>Availability</a></li><li><a href=https://vouch.sh/docs/migration/>Migration</a></li><li><a href=https://vouch.sh/docs/faq/>FAQ</a></li></ul></li></ul></nav></aside><article class=docs-content><div class=docs-breadcrumb><a href=https://vouch.sh/docs/>Docs</a><span class=separator>/</span>
Automate User Provisioning with SCIM</div><h1>Automate User Provisioning with SCIM</h1><p style=color:var(--text-muted);font-size:1.1rem;margin-bottom:2rem>Automate user lifecycle management with your identity provider</p><p>Manually adding and removing users from Vouch when people join or leave your organization is error-prone and easy to forget. A missed offboarding means someone retains access to hardware-backed credentials they should no longer have.</p><p>SCIM (System for Cross-domain Identity Management) lets your identity provider &ndash; Google Workspace, Okta, Azure AD, or OneLogin &ndash; handle this automatically in real time. Vouch supports the <strong>SCIM 2.0</strong> protocol (<a href=https://datatracker.ietf.org/doc/html/rfc7644>RFC 7644</a>) for automated user provisioning and de-provisioning. When SCIM is configured, your identity provider (IdP) can automatically:</p><ul><li><strong>Create</strong> new Vouch user accounts when people join your organization.</li><li><strong>Update</strong> user attributes (name, email, role) when they change in your directory.</li><li><strong>Deactivate</strong> accounts instantly when someone leaves or changes roles.</li></ul><p>This eliminates manual user management and ensures that credential access is always in sync with your corporate directory.</p><hr><h2 id=how-it-works>How It Works</h2><ol><li>You generate a SCIM bearer token from the Vouch server.</li><li>You configure your identity provider to point at Vouch&rsquo;s SCIM 2.0 endpoint.</li><li>The IdP pushes user lifecycle events (create, update, deactivate) to Vouch in real time.</li><li>Vouch processes each event and updates its internal user directory accordingly.</li></ol><p>Because SCIM is a standardized protocol, Vouch works with any identity provider that supports SCIM 2.0 &ndash; including Google Workspace, Okta, Azure AD (Entra ID), and OneLogin.</p><hr><h2 id=step-1----generate-a-scim-token>Step 1 &ndash; Generate a SCIM Token</h2><p>Before your identity provider can communicate with Vouch, you need to generate a bearer token that the IdP will use to authenticate its requests.</p><p>First, ensure you are logged in with an account that has <strong>organization administrator</strong> privileges:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>vouch login
</span></span></code></pre></div><p>Then create a SCIM token:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X POST https://us.vouch.sh/api/v1/org/scim-tokens <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b ~/.vouch/cookie.txt <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{&#34;description&#34;: &#34;Google Workspace SCIM&#34;, &#34;expires_in_days&#34;: 365}&#39;</span>
</span></span></code></pre></div><p>The response includes the plaintext token:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#e6db74>&#34;scim_tok_abc123&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Google Workspace SCIM&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;token&#34;</span>: <span style=color:#e6db74>&#34;vouch_scim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;expires_at&#34;</span>: <span style=color:#e6db74>&#34;2027-01-15T00:00:00Z&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;created_at&#34;</span>: <span style=color:#e6db74>&#34;2026-01-15T12:00:00Z&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><blockquote><p><strong>Security note:</strong> Vouch stores only a cryptographic hash of the token. The plaintext value is shown <strong>exactly once</strong> in the creation response. Copy it immediately and store it securely &ndash; you will not be able to retrieve it again. If you lose the token, revoke it and create a new one.</p></blockquote><p>The <code>expires_in_days</code> field is <strong>required</strong> and must be an integer between <strong>1</strong> and <strong>365</strong>. Choose an expiration period that balances security with operational convenience. Most organizations use 365 days and rotate tokens annually.</p><hr><h2 id=step-2----configure-your-identity-provider>Step 2 &ndash; Configure Your Identity Provider</h2><p>Use the following values when configuring SCIM in your identity provider:</p><table><thead><tr><th>Setting</th><th>Value</th></tr></thead><tbody><tr><td><strong>SCIM Base URL</strong></td><td><code>https://us.vouch.sh/scim/v2</code></td></tr><tr><td><strong>Authentication Type</strong></td><td>Bearer Token</td></tr><tr><td><strong>Authorization Header</strong></td><td><code>Bearer vouch_scim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code></td></tr></tbody></table><p>Replace the token value with the plaintext token you received in Step 1.</p><h3 id=google-workspace>Google Workspace</h3><ol><li>Open the <a href=https://admin.google.com>Google Admin Console</a>.</li><li>Navigate to <strong>Apps > Web and mobile apps</strong>.</li><li>Find or add the Vouch application.</li><li>Open the <strong>Auto-provisioning</strong> section.</li><li>Set the <strong>SCIM Base URL</strong> to <code>https://us.vouch.sh/scim/v2</code>.</li><li>Set the <strong>Authentication Type</strong> to <strong>Bearer Token</strong> and paste your SCIM token.</li><li>Click <strong>Test Connection</strong> to verify.</li><li>Enable auto-provisioning and configure the desired attribute mappings.</li><li>Click <strong>Save</strong>.</li></ol><h3 id=okta>Okta</h3><ol><li>Open the Okta Admin Dashboard.</li><li>Navigate to <strong>Applications > Applications</strong>.</li><li>Select or create the Vouch application.</li><li>Go to the <strong>Provisioning</strong> tab and click <strong>Configure API Integration</strong>.</li><li>Check <strong>Enable API Integration</strong>.</li><li>Set the <strong>SCIM 2.0 Base URL</strong> to <code>https://us.vouch.sh/scim/v2</code>.</li><li>Set the <strong>API Token</strong> to the SCIM bearer token from Step 1.</li><li>Click <strong>Test API Credentials</strong> to verify connectivity.</li><li>Click <strong>Save</strong>.</li><li>Under <strong>Provisioning > To App</strong>, enable the desired actions: <strong>Create Users</strong>, <strong>Update User Attributes</strong>, and <strong>Deactivate Users</strong>.</li></ol><h3 id=azure-ad-entra-id>Azure AD (Entra ID)</h3><ol><li>Open the <a href=https://portal.azure.com>Azure Portal</a> and navigate to <strong>Azure Active Directory > Enterprise Applications</strong>.</li><li>Select or create the Vouch application.</li><li>Go to <strong>Provisioning</strong> and set the <strong>Provisioning Mode</strong> to <strong>Automatic</strong>.</li><li>Under <strong>Admin Credentials</strong>:<ul><li>Set <strong>Tenant URL</strong> to <code>https://us.vouch.sh/scim/v2</code>.</li><li>Set <strong>Secret Token</strong> to the SCIM bearer token from Step 1.</li></ul></li><li>Click <strong>Test Connection</strong> to verify that Azure can reach the Vouch SCIM endpoint.</li><li>Configure attribute mappings under <strong>Mappings</strong> to align Azure AD attributes with Vouch user fields.</li><li>Set <strong>Provisioning Status</strong> to <strong>On</strong>.</li><li>Click <strong>Save</strong> to begin provisioning.</li></ol><h3 id=onelogin>OneLogin</h3><ol><li>Open the OneLogin Admin Panel.</li><li>Navigate to <strong>Applications > Applications</strong>.</li><li>Select or create the Vouch application.</li><li>Go to the <strong>Provisioning</strong> tab.</li><li>Enable provisioning and set the <strong>SCIM Base URL</strong> to <code>https://us.vouch.sh/scim/v2</code>.</li><li>Set the <strong>SCIM Bearer Token</strong> to the token from Step 1.</li><li>Under <strong>Provisioning Actions</strong>, enable <strong>Create user</strong>, <strong>Update user</strong>, and <strong>Delete user</strong>.</li><li>Click <strong>Save</strong>.</li></ol><hr><h2 id=step-3----test-the-integration>Step 3 &ndash; Test the Integration</h2><p>After configuring your identity provider, verify that the SCIM connection is working correctly by querying the Vouch SCIM endpoints directly.</p><h3 id=check-the-service-provider-configuration>Check the Service Provider Configuration</h3><p>This endpoint returns the SCIM capabilities supported by Vouch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s https://us.vouch.sh/scim/v2/ServiceProviderConfig <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer vouch_scim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq .
</span></span></code></pre></div><p>A successful response returns a JSON object describing the supported SCIM features, including authentication schemes, bulk support, and filtering capabilities.</p><h3 id=list-provisioned-users>List Provisioned Users</h3><p>Retrieve the list of users that have been provisioned through SCIM:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s https://us.vouch.sh/scim/v2/Users <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer vouch_scim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq .
</span></span></code></pre></div><p>This returns a <code>ListResponse</code> containing all SCIM-managed users and their attributes.</p><h3 id=list-provisioned-groups>List Provisioned Groups</h3><p>Retrieve the list of groups that have been provisioned through SCIM:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s https://us.vouch.sh/scim/v2/Groups <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer vouch_scim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq .
</span></span></code></pre></div><p>This returns a <code>ListResponse</code> containing all SCIM-managed groups and their membership information.</p><hr><h2 id=scim-20-endpoints>SCIM 2.0 Endpoints</h2><p>Vouch implements the following SCIM 2.0 endpoints:</p><table><thead><tr><th>Method</th><th>Endpoint</th><th>Description</th></tr></thead><tbody><tr><td><code>GET</code></td><td><code>/scim/v2/ServiceProviderConfig</code></td><td>Returns the SCIM service provider configuration and supported features.</td></tr><tr><td><code>GET</code></td><td><code>/scim/v2/ResourceTypes</code></td><td>Lists the resource types (Users, Groups) supported by the server.</td></tr><tr><td><code>GET</code></td><td><code>/scim/v2/Schemas</code></td><td>Returns the full SCIM schemas supported by the server.</td></tr><tr><td><code>GET</code></td><td><code>/scim/v2/Users</code></td><td>Lists all provisioned users. Supports filtering and pagination.</td></tr><tr><td><code>POST</code></td><td><code>/scim/v2/Users</code></td><td>Creates a new user account.</td></tr><tr><td><code>GET</code></td><td><code>/scim/v2/Users/{id}</code></td><td>Retrieves a specific user by their SCIM ID.</td></tr><tr><td><code>PUT</code></td><td><code>/scim/v2/Users/{id}</code></td><td>Replaces all attributes of a specific user.</td></tr><tr><td><code>PATCH</code></td><td><code>/scim/v2/Users/{id}</code></td><td>Updates specific attributes of a user (partial update).</td></tr><tr><td><code>DELETE</code></td><td><code>/scim/v2/Users/{id}</code></td><td>Deactivates (soft-deletes) a user account.</td></tr><tr><td><code>GET</code></td><td><code>/scim/v2/Groups</code></td><td>Lists all provisioned groups. Supports filtering and pagination.</td></tr><tr><td><code>POST</code></td><td><code>/scim/v2/Groups</code></td><td>Creates a new group.</td></tr><tr><td><code>GET</code></td><td><code>/scim/v2/Groups/{id}</code></td><td>Retrieves a specific group by its SCIM ID.</td></tr><tr><td><code>PUT</code></td><td><code>/scim/v2/Groups/{id}</code></td><td>Replaces all attributes of a specific group.</td></tr><tr><td><code>PATCH</code></td><td><code>/scim/v2/Groups/{id}</code></td><td>Updates specific attributes of a group (partial update).</td></tr><tr><td><code>DELETE</code></td><td><code>/scim/v2/Groups/{id}</code></td><td>Deletes a group.</td></tr></tbody></table><p>All endpoints require a valid SCIM bearer token in the <code>Authorization</code> header. Filtering is supported on the <code>Users</code> and <code>Groups</code> list endpoints using the SCIM filter syntax (e.g., <code>?filter=userName eq "alice@example.com"</code>).</p><hr><h2 id=immediate-de-provisioning>Immediate De-provisioning</h2><p>One of the most important benefits of SCIM integration is <strong>immediate de-provisioning</strong>. When an employee leaves your organization or changes roles:</p><ol><li>Your identity provider sends a <code>PATCH</code> or <code>DELETE</code> request to the Vouch SCIM endpoint to deactivate the user.</li><li>Vouch immediately marks the user account as inactive.</li><li>All <strong>active sessions</strong> for that user are revoked instantly.</li><li>The user can no longer obtain new credentials. Previously issued short-lived credentials (SSH certificates, AWS STS credentials) will continue to function until their natural expiration (up to 8 hours). No new credentials can be issued after de-provisioning.</li></ol><p>Because all Vouch credentials are short-lived (maximum 8 hours), the exposure window after de-provisioning is limited. Sessions are revoked immediately, and outstanding credentials expire on their own shortly after.</p><p>This is a significant security improvement over traditional provisioning workflows where revoking access requires manual steps across multiple systems. With Vouch and SCIM, de-provisioning is automated and the blast radius is minimized by the short credential lifetime.</p><hr><h2 id=managing-scim-tokens>Managing SCIM Tokens</h2><p>Organization administrators can list, create, and revoke SCIM tokens through the Vouch API.</p><h3 id=list-all-scim-tokens>List All SCIM Tokens</h3><p>Retrieve all active SCIM tokens for your organization:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s https://us.vouch.sh/api/v1/org/scim-tokens <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b ~/.vouch/cookie.txt <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq .
</span></span></code></pre></div><p>The response includes token metadata (ID, description, creation date, expiration date) but never the plaintext token value.</p><h3 id=create-a-new-token>Create a New Token</h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X POST https://us.vouch.sh/api/v1/org/scim-tokens <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b ~/.vouch/cookie.txt <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{&#34;description&#34;: &#34;Okta SCIM Integration&#34;, &#34;expires_in_days&#34;: 180}&#39;</span>
</span></span></code></pre></div><p>The response includes the plaintext token. Store it securely &ndash; it will not be shown again.</p><h3 id=revoke-a-token>Revoke a Token</h3><p>Revoke a SCIM token by its ID to immediately disable it:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X DELETE https://us.vouch.sh/api/v1/org/scim-tokens/scim_tok_abc123 <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b ~/.vouch/cookie.txt
</span></span></code></pre></div><p>After revocation, any identity provider using this token will receive <code>401 Unauthorized</code> responses and provisioning will stop until a new token is configured.</p><hr><h2 id=rotating-scim-tokens>Rotating SCIM Tokens</h2><p>To rotate a SCIM token without interrupting provisioning, follow this four-step process:</p><ol><li><p><strong>Create a new token</strong> with a descriptive name that indicates it is the replacement:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X POST https://us.vouch.sh/api/v1/org/scim-tokens <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b ~/.vouch/cookie.txt <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -d <span style=color:#e6db74>&#39;{&#34;description&#34;: &#34;Google Workspace SCIM (rotated 2026-02)&#34;, &#34;expires_in_days&#34;: 365}&#39;</span>
</span></span></code></pre></div></li><li><p><strong>Update your identity provider</strong> with the new token value. Follow the configuration steps for your IdP described in Step 2 above, replacing the old token with the new one.</p></li><li><p><strong>Test the new token</strong> by triggering a sync from your identity provider or by querying the SCIM endpoint directly with the new token:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s https://us.vouch.sh/scim/v2/Users <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer vouch_scim_NEW_TOKEN_HERE&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq <span style=color:#e6db74>&#39;.totalResults&#39;</span>
</span></span></code></pre></div></li><li><p><strong>Revoke the old token</strong> once you have confirmed that the new token is working:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X DELETE us.vouch.sh/api/v1/org/scim-tokens/scim_tok_OLD_ID <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -b ~/.vouch/cookie.txt
</span></span></code></pre></div></li></ol><p>By creating the new token before revoking the old one, you ensure there is no window during which provisioning is interrupted.</p><hr><h2 id=troubleshooting>Troubleshooting</h2><h3 id=401-unauthorized>401 Unauthorized</h3><p>The SCIM token is invalid, expired, or revoked.</p><ul><li>Verify the token has not expired by listing your active tokens.</li><li>Ensure the <code>Authorization</code> header uses the format <code>Bearer &lt;token></code> with no extra whitespace or characters.</li><li>If the token was recently created, confirm you copied the full plaintext value &ndash; it is only shown once during creation.</li><li>If the token has expired or been revoked, create a new token and update your identity provider configuration.</li></ul><h3 id=409-conflict>409 Conflict</h3><p>A user or group with the same unique identifier already exists.</p><ul><li><p>This typically occurs when your identity provider attempts to create a user who has already been provisioned, either through a previous SCIM sync or through manual registration.</p></li><li><p>Check whether the user already exists in Vouch by querying the Users endpoint with a filter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s <span style=color:#e6db74>&#34;https://us.vouch.sh/scim/v2/Users?filter=userName%20eq%20%22alice%40example.com%22&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer vouch_scim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq .
</span></span></code></pre></div></li><li><p>If the user exists, your IdP should use <code>PUT</code> or <code>PATCH</code> to update the existing record rather than <code>POST</code> to create a new one. Most identity providers handle this automatically after the initial conflict.</p></li></ul><h3 id=users-not-syncing>Users Not Syncing</h3><p>If users are not appearing in Vouch after configuring SCIM:</p><ul><li><p><strong>Verify the SCIM Base URL.</strong> Ensure it is set to <code>https://us.vouch.sh/scim/v2</code> with no trailing slash.</p></li><li><p><strong>Test connectivity.</strong> Use the <code>ServiceProviderConfig</code> endpoint to confirm the IdP can reach Vouch:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -s https://us.vouch.sh/scim/v2/ServiceProviderConfig <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  -H <span style=color:#e6db74>&#34;Authorization: Bearer vouch_scim_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx&#34;</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  | jq .
</span></span></code></pre></div></li><li><p><strong>Check your IdP&rsquo;s provisioning logs.</strong> Most identity providers maintain a log of SCIM operations and any errors encountered. Look for HTTP error codes or timeout messages.</p></li><li><p><strong>Confirm provisioning is enabled.</strong> In some IdPs (especially Okta and Azure AD), you must explicitly enable provisioning actions (Create, Update, Deactivate) after configuring the API connection.</p></li><li><p><strong>Verify user assignment.</strong> In many IdPs, users must be explicitly assigned to the Vouch application before they will be provisioned. Check that the intended users or groups are assigned.</p></li></ul><h3 id=attribute-mapping-issues>Attribute Mapping Issues</h3><p>If user attributes (name, email, department) are not appearing correctly in Vouch:</p><ul><li>Review the attribute mappings in your identity provider&rsquo;s SCIM configuration.</li><li>Vouch expects the standard SCIM 2.0 <code>User</code> schema attributes:<ul><li><code>userName</code> &ndash; The user&rsquo;s email address (used as the unique identifier).</li><li><code>name.givenName</code> &ndash; The user&rsquo;s first name.</li><li><code>name.familyName</code> &ndash; The user&rsquo;s last name.</li><li><code>emails</code> &ndash; An array of email objects; the <code>primary</code> email is used for notifications.</li><li><code>active</code> &ndash; A boolean indicating whether the account is active.</li></ul></li><li>Ensure your IdP is mapping its directory attributes to these standard SCIM fields.</li></ul></article></div><div class=sidebar-overlay id=sidebar-overlay onclick=closeSidebar()></div><button class=sidebar-toggle onclick=toggleSidebar() aria-label="Toggle sidebar">
<svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
</button>
<script>function toggleSidebar(){document.getElementById("docs-sidebar").classList.toggle("open"),document.getElementById("sidebar-overlay").classList.toggle("open")}function closeSidebar(){document.getElementById("docs-sidebar").classList.remove("open"),document.getElementById("sidebar-overlay").classList.remove("open")}</script></main><footer class=footer><div class=footer-inner><div class=footer-left><div>&copy; 2026 Smoke Turner, LLC</div><div class=footer-instances>Instances:
<a href=https://us.vouch.sh>US</a>
&#183;
<span class=coming-soon>EU (coming soon)</span>
&#183;
<span class=coming-soon>APAC (coming soon)</span></div></div><div class=footer-links><a href=/about/>About</a>
<a href=/docs/security/>Security</a>
<a href=/privacy/>Privacy</a>
<a href=/terms/>Terms</a>
<a href=https://github.com/vouch-sh/vouch target=_blank rel=noopener>GitHub</a></div></div></footer></body></html>