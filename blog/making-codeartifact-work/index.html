<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Making AWS CodeArtifact Work for Every Package Manager â€” Vouch â€” Hardware-Backed Developer Credentials</title>
<meta name=description content="CodeArtifact token rotation is the #1 complaint. Vouch eliminates the cron jobs and makes CodeArtifact as easy as any public registry."><link rel=canonical href=https://vouch.sh/blog/making-codeartifact-work/><meta property="og:title" content="Making AWS CodeArtifact Work for Every Package Manager â€” Vouch â€” Hardware-Backed Developer Credentials"><meta property="og:description" content="CodeArtifact token rotation is the #1 complaint. Vouch eliminates the cron jobs and makes CodeArtifact as easy as any public registry."><meta property="og:url" content="https://vouch.sh/blog/making-codeartifact-work/"><meta property="og:site_name" content="Vouch"><meta property="og:type" content="article"><meta property="og:image" content="https://vouch.sh/img/og-image.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:title content="Making AWS CodeArtifact Work for Every Package Manager â€” Vouch â€” Hardware-Backed Developer Credentials"><meta name=twitter:description content="CodeArtifact token rotation is the #1 complaint. Vouch eliminates the cron jobs and makes CodeArtifact as easy as any public registry."><meta name=twitter:image content="https://vouch.sh/img/og-image.png"><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"><link rel=icon href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ”‘</text></svg>"><link rel=author href=/humans.txt><script type=application/ld+json>{"@context":"https://schema.org","@type":"WebSite","description":"Open-source credential broker that issues short-lived SSH, AWS, GitHub, and Kubernetes credentials after FIDO2 hardware verification. One YubiKey tap, 8 hours of access.","name":"Vouch","url":"https://vouch.sh/"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","logo":"https://vouch.sh/img/og-image.png","name":"Smoke Turner, LLC","sameAs":["https://github.com/vouch-sh/vouch"],"url":"https://smoketurner.com"}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Organization","name":"Smoke Turner, LLC"},"dateModified":"2026-02-12","datePublished":"2026-02-12","description":"CodeArtifact token rotation is the #1 complaint. Vouch eliminates the cron jobs and makes CodeArtifact as easy as any public registry.","headline":"Making AWS CodeArtifact Work for Every Package Manager","mainEntityOfPage":{"@id":"https://vouch.sh/blog/making-codeartifact-work/","@type":"WebPage"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://vouch.sh/img/og-image.png"},"name":"Smoke Turner, LLC"}}</script><link rel=stylesheet href=https://vouch.sh/css/main.min.696319dec26a9f9526ac8dae8c8e12c4271af4250b998632e1aca67447bb363d.css></head><body><header class=nav><div class=nav-inner><a href=/ class=nav-logo><svg viewBox="0 0 32 32" fill="none"><rect x="9" y="14" width="14" height="12" rx="2" stroke="currentcolor" stroke-width="2"/><path d="M12 14V10a4 4 0 118 0v4" stroke="currentcolor" stroke-width="2" stroke-linecap="round"/><circle cx="16" cy="20" r="1.5" fill="currentcolor"/><line x1="16" y1="21.5" x2="16" y2="23.5" stroke="currentcolor" stroke-width="1.5" stroke-linecap="round"/></svg>
vouch
</a><button class=nav-toggle aria-label="Toggle navigation" onclick='document.querySelector(".nav-links").classList.toggle("open")'><svg viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><ul class=nav-links><li><a href=/docs/>Docs</a></li><li><a href=/blog/>Blog</a></li><li><a href=/about/>About</a></li><li><a href=https://github.com/vouch-sh/vouch target=_blank rel=noopener>GitHub<svg class="github-icon" viewBox="0 0 24 24" fill="currentcolor"><path d="M12 0C5.37.0.0 5.37.0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57.0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925.0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18.0.0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225.0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22.0 1.605-.015 2.895-.015 3.3.0.315.225.69.825.57A12.02 12.02.0 0024 12c0-6.63-5.37-12-12-12z"/></svg></a></li></ul></div></header><main class=content-wrapper><article class=blog-single><h1>Making AWS CodeArtifact Work for Every Package Manager</h1><div class=meta><time datetime=2026-02-12>February 12, 2026</time>
&#183; 3 min read</div><p>AWS CodeArtifact is a managed package repository that supports npm, pip, Maven, Cargo, NuGet, and more. It integrates with IAM for access control and stores packages in your own AWS account. For teams that need private packages without running Artifactory or Nexus, it&rsquo;s an attractive option.</p><p>But the developer experience has a problem: <strong>token rotation</strong>.</p><h2 id=the-token-problem>The token problem</h2><p>CodeArtifact uses authorization tokens that expire after 12 hours by default. To get a token, you run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>aws codeartifact get-authorization-token <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --domain my-domain <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --domain-owner <span style=color:#ae81ff>123456789012</span> <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --query authorizationToken <span style=color:#ae81ff>\
</span></span></span><span style=display:flex><span><span style=color:#ae81ff></span>  --output text
</span></span></code></pre></div><p>This gives you a bearer token that you then configure in your package manager:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># npm</span>
</span></span><span style=display:flex><span>npm config set //my-domain-123456789012.d.codeartifact.us-east-1.amazonaws.com/npm/my-repo/:_authToken<span style=color:#f92672>=</span>$TOKEN
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># pip</span>
</span></span><span style=display:flex><span>pip install my-package --index-url https://aws:$TOKEN@my-domain-123456789012.d.codeartifact.us-east-1.amazonaws.com/pypi/my-repo/simple/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Cargo</span>
</span></span><span style=display:flex><span><span style=color:#75715e># (even more complicated -- requires editing credentials.toml)</span>
</span></span></code></pre></div><p>Every 12 hours, the token expires. Every package manager has a different configuration mechanism. The result is:</p><ol><li><strong>Cron jobs</strong> to refresh tokens. These break silently when AWS credentials expire.</li><li><strong>Wrapper scripts</strong> like <code>refresh-codeartifact.sh</code> that every developer has to remember to run.</li><li><strong>Stale tokens</strong> that cause cryptic authentication failures in the middle of <code>npm install</code>.</li><li><strong>Teams giving up</strong> and using npmjs.com, PyPI, or crates.io public registries instead of private ones.</li></ol><h2 id=what-teams-actually-do>What teams actually do</h2><p>In practice, most teams solve the token rotation problem with one of these patterns:</p><p><strong>The cron job:</strong> A shell script that runs every 6 hours, fetches a new token, and updates <code>.npmrc</code> or <code>pip.conf</code>. This works until someone&rsquo;s AWS credentials expire, the cron job fails silently, and <code>npm install</code> breaks at 3 PM.</p><p><strong>The login script:</strong> A function in <code>.zshrc</code> that fetches a new token at shell startup. This works until someone opens a new terminal tab and forgets to run it, or keeps a terminal open for more than 12 hours.</p><p><strong>The CI/CD workaround:</strong> A pipeline step that fetches a fresh token before every <code>npm install</code>. This works for CI but doesn&rsquo;t help developers running builds locally.</p><p>None of these are good. Package managers should authenticate transparently, the way <code>git push</code> works with GitHub.</p><h2 id=vouch-makes-it-transparent>Vouch makes it transparent</h2><p>With Vouch, CodeArtifact authentication works the same way AWS CLI authentication works &ndash; through a credential helper that fetches tokens on demand:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># One-time setup</span>
</span></span><span style=display:flex><span>vouch setup codeartifact --tool cargo --repository my-repo --domain my-domain --domain-owner <span style=color:#ae81ff>123456789012</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Daily use</span>
</span></span><span style=display:flex><span>vouch login           <span style=color:#75715e># One YubiKey tap, 8-hour session</span>
</span></span><span style=display:flex><span>cargo build           <span style=color:#75715e># Token fetched automatically</span>
</span></span><span style=display:flex><span>pip install my-pkg    <span style=color:#75715e># Token fetched automatically</span>
</span></span></code></pre></div><h3 id=how-it-works>How it works</h3><ol><li>When a package manager needs to authenticate, Vouch&rsquo;s credential helper intercepts the request.</li><li>Vouch exchanges your active hardware-backed session for temporary STS credentials.</li><li>It calls <code>codeartifact:GetAuthorizationToken</code> to get a fresh CodeArtifact token.</li><li>The token is returned to the package manager for the current operation.</li></ol><p>No cron jobs. No wrapper scripts. No stale tokens. The token is fetched on demand, every time.</p><h3 id=per-package-manager-behavior>Per-package-manager behavior</h3><table><thead><tr><th>Package manager</th><th>Token model</th><th>Developer experience</th></tr></thead><tbody><tr><td><strong>Cargo</strong></td><td>Dynamic (fetched on demand via credential provider)</td><td>Fully transparent. <code>cargo build</code> just works.</td></tr><tr><td><strong>pip</strong></td><td>Dynamic (embedded in index URL via credential helper)</td><td>Fully transparent. <code>pip install</code> just works.</td></tr><tr><td><strong>npm</strong></td><td>Static (written to <code>.npmrc</code>, 12h expiry)</td><td>Re-run <code>vouch setup codeartifact --tool npm</code> when token expires.</td></tr><tr><td><strong>Maven</strong></td><td>Environment variable (<code>CODEARTIFACT_AUTH_TOKEN</code>)</td><td>Use <code>vouch exec --type codeartifact -- mvn deploy</code>.</td></tr></tbody></table><p>Cargo and pip get the best experience because their credential systems support dynamic token fetching. npm&rsquo;s <code>.npmrc</code> format requires a static token, but even there, refreshing is a single command instead of a manual multi-step process.</p><h2 id=the-broader-picture>The broader picture</h2><p>CodeArtifact token rotation is a symptom of a larger problem: AWS services that use IAM authentication are harder to use than their third-party equivalents, not because of features, but because of credential UX.</p><p>A startup choosing between CodeArtifact and a hosted npm registry shouldn&rsquo;t have to factor in &ldquo;how hard is credential management.&rdquo; With Vouch, they don&rsquo;t.</p><p>The same <code>vouch login</code> that handles CodeArtifact tokens also provides:</p><ul><li><strong>AWS CLI credentials</strong> via <code>credential_process</code></li><li><strong>CodeCommit Git auth</strong> via SigV4 signing</li><li><strong>ECR Docker auth</strong> via <code>credential-helper</code></li><li><strong>SSH certificates</strong> via the SSH agent</li><li><strong>GitHub tokens</strong> via installation token exchange</li></ul><p>One authentication event, one tool, every credential handled.</p><h2 id=getting-started>Getting started</h2><p>See the <a href=https://vouch.sh/docs/codeartifact/>CodeArtifact integration guide</a> for setup instructions covering Cargo, pip, npm, and Maven.</p></article></main><footer class=footer><div class=footer-inner><div class=footer-left><div>&copy; 2026 Smoke Turner, LLC</div><div class=footer-instances>Instances:
<a href=https://us.vouch.sh>US</a>
&#183;
<span class=coming-soon>EU (coming soon)</span>
&#183;
<span class=coming-soon>APAC (coming soon)</span></div></div><div class=footer-links><a href=/about/>About</a>
<a href=/docs/security/>Security</a>
<a href=/privacy/>Privacy</a>
<a href=/terms/>Terms</a>
<a href=https://github.com/vouch-sh/vouch target=_blank rel=noopener>GitHub</a></div></div></footer></body></html>